# Zeromq

​    一个处理消息传输的开源组件

特征：

1. 嵌入式的网络链接库

2. 用于大型高并发场景
3. 用于线程间、进程间、TCP、广播等
4. 构建多对多的连接模式
5. IO高吞吐，异步机制
6. 多语言支持 C 接口，多平台mac  window  linux



利用多核实现高并发场景的方式：

1. 多线程
2. 多进程
3. 协程
4. 微服务



将功能划分为多个微服务（多线程，多进程）来实现功能，那么微服务如何进行通信？

1. 多线程

   ( 1 )  Pipe：管道，一端写一端读，流向单一

   ( 2 )  队列：actor模型、erlang(mailbox)、skynet

   ​		多线程上面，封装运行实体actor + 消息队列，lua vm + 消息队列

   ( 3 )  锁：互斥锁、条件变量、读写锁、cas、自旋锁、乐观悲观锁等

   

2. 多进程

   ( 1 )  共享内存：nginx 配置 openresty 中 shared_dict 实现进程间通信

   ( 2 )  管道：具有父子关系 fork

   ( 3 )  队列

   (4 )  Socket

   

   

   多维度思考选择哪种方式进程间通信

   1、扩展性

   2、 性能

   3、 灵活性

   

   SOCKET：

   1、建立连接，销毁连接

   2、制定协议，选择协议  protobuffer、messagepack、shrift、json

   3、错误处理

   4、断线重连、心跳检测

   5、 io  epoll

   

   zeromq支持通信模型：

   1、监听发布模型

   2、推拉模型

   3、请求回应模型

   

   zeromq

   1、启动顺序无关

   2、 bind、connect  accept  send  recv函数实现进程间通信

   3、 无须处理粘包、拆包、断线重连的问题

   

   

   