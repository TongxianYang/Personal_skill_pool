# VIM Commands

Dec 7, 2021



## 命令模式中的基础命令

VIM有大量的命令可供你使用，这里主要介绍针对单个文件，尤其是代码文件的编辑中最有用的一些命令。我会根据以下编辑文件的逻辑顺序来介绍：

1. 复制、粘贴

2. 多文件打开方式

3. 缓冲区的管理和切换

4. 多窗口编辑

5. 双窗口比较

5. 多标签页编辑

   

### 复制/粘贴

| **目的**       | **按键**                       |
| :------------- | :----------------------------- |
| 多行复制       | V(行可视模式) j(选择)  y(复制) |
| 粘贴系统剪贴板 | "+P                            |



### 多文件打开方式

**vim  文件名  文件名  文件名  文件名...**    或     **vim *.c  *.h**

| **目的**                                                     | **按键**                                   |
| :----------------------------------------------------------- | :----------------------------------------- |
| 显示“参数”，即需要编辑的多个文件的列表                       | :args                                      |
| 使用新的文件名替换参数列表                                   | :args 文件名                               |
| 打开下一个文件；如当前文件修改（未存盘）则会报错中止，但如果命令后面加 ! 则会放弃修改内容 | :next（可缩写为 :n）                       |
| 打开上一个文件                                               | :Next（缩写 :N）或 :previous（缩写 :prev） |
| 回到列表中的第一个文件                                       | :first 或 :rewind                          |
| 打开列表中的最后一个文件                                     | :last                                      |
| Vim 切换文件时自动存盘                                       | :set autowrite                             |
| 切换到下一个文件并执行正常模式命令 ggP，跳转到文件开头并贴入文本 | n\|normal ggP                              |
| 进入 Vim，打开当前目录以及子目录的所有cpp和h文件             | :args \*\*/\*.cpp  \*\*/\*.h               |
|                                                              |                                            |



### 缓冲区的管理和切换

| **目的**                                                     | **按键**                          |
| :----------------------------------------------------------- | :-------------------------------- |
| 可以显示缓冲区的列表                                         | :buffers 或 :ls                   |
| 跳转到编号对应的缓冲区，如当前缓冲区已被修改（未存盘）则会报错中止，但如果命令后面加 ! 则会放弃修改内容 | :buffer 列表编号                  |
| 删除编号对应的缓冲区，编号省略的话删除当前缓冲区             | :bdelete 列表编号（缩写为 :bd）   |
| 跳转到下一个缓冲区                                           | :bnext（缩写 :bn）                |
| 跳转到上一个缓冲区                                           | :bNext（:bN）或 :bprevious（:bp） |
| 跳转到缓冲区列表中的第一个文件                               | :bfirst 或 :brewind               |
| 跳转到缓冲区列表中的最后一个文件                             | :blast                            |
| 可以在最近的两个缓冲区之间来回切换                           | Ctrl^                             |
|                                                              |                                   |



### 多窗口编辑

| **目的**                                                     | **按键**                    |
| :----------------------------------------------------------- | :-------------------------- |
| 横屏分割                                                     | :split（缩写 :sp）          |
| 竖屏分割                                                     | :vsplit（缩写 :vs）         |
| 可以在窗口之间跳转                                           | Ctrl-W 方向键（h、j、k、l） |
| 跳转到下一个（往右和往下）窗口，如果已经是右下角的窗口，则跳转到左上角的窗口 | Ctrl-W w                    |
| 跳转到上一个（往左和往上）窗口，如果已经是左上角的窗口，则跳转到右下角的窗口 | Ctrl-W W                    |
| 打开一个新窗口                                               | Ctrl-W n 或 :new            |
| 关闭当前窗口，当前窗口如果已经是最后一个则无效               | Ctrl-W c 或 :close          |
| 退出当前窗口，当最后一个窗口退出时则退出 Vim                 | Ctrl-W q 或 :quit           |
| 只保留当前窗口，关闭其他所有窗口                             | Ctrl-W o 或 :only           |
| 把当前窗口横向一分为二                                       | Ctrl-W s 和 :split          |
| 把当前窗口纵向一分为二                                       | Ctrl-W v 和 :vsplit         |
| 使得所有窗口大小相同                                         | Ctrl-W =                    |
| 设置窗口高度，命令前的数字表示高度行数，默认为纵向占满（想专心编辑某个文件时很有用） | Ctrl-W _                    |
| 设置窗口宽度，命令前的数字表示宽度列数，默认为横向占满       | Ctrl-W \|                   |
| 增加窗口的高度，命令前的数字表示需要增加的行数，默认为 1     | Ctrl-W +                    |
| 减少窗口的高度，命令前的数字表示需要减少的行数，默认为 1     | Ctrl-W -                    |
| 增加窗口的宽度，命令前的数字表示需要增加的列数，默认为 1     | Ctrl-W >                    |
| 减少窗口的宽度，命令前的数字表示需要增加的列数，默认为 1     | Ctrl-W <                    |
|                                                              | Ctrl-W                      |



### 双窗口比较

比较两个文件，Vim 对此也有特殊的支持

| **目的**                                                     | **按键**                             |
| :----------------------------------------------------------- | :----------------------------------- |
| 两个文件进行比较。在比较时，Vim 会自动折叠相同的代码行，并加亮两边文本的不同部分 | vimdiff 或 gvimdiff 后面跟两个文件名 |
| 在已打开第一个文件情况下，Vim 内部发起与第二个文件的比较     | :vert diffsplit 第二个文件           |
|                                                              |                                      |



### 多标签页编辑

单窗口多文件编辑最适合的场景是批量修改具有相似性质的文件；

多窗口编辑最适合的场景是需要对多个文件进行对比编辑；

同时编辑多个文件的场景，就可以考虑多标签页的编辑方式。

| **目的**                                                     | **按键**                                |
| :----------------------------------------------------------- | :-------------------------------------- |
| 可以在新标签页中展示命令的结果                               | 命令行模式命令前加 tab                  |
| 展示所有标签页的列表                                         | :tabs                                   |
| 可以打开一个空白的新标签页，后面有文件名的话则打开该文件     | :tabnew 或 :tabedit                     |
| 可以关闭当前标签页（如果标签页里只有一个窗口，使用窗口关闭命令 Ctrl-W c 应该更快） | :tabclose                               |
| 可以切换到下一个标签页                                       | :tabnext、gt 或 C-PageDown              |
| 可以切换到上一个标签页                                       | :tabNext、:tabprevious 、gT 或 C-PageUp |
| 切换到第一个标签页                                           | :tabfirst 或 :tabrewind                 |
| 切换到最后一个标签页                                         | :tablast                                |
|                                                              |                                         |

